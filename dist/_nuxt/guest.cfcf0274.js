import{A as d,B as m,C as g,D as h,b as w,E as S}from"./entry.f9101889.js";import{u as y}from"./index.483d6c5e.js";const x=decodeURIComponent,k=encodeURIComponent,C=/; */,l=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function E(e,i){if(typeof e!="string")throw new TypeError("argument str must be a string");let o={},t=i||{},r=e.split(C),s=t.decode||x;for(let n=0;n<r.length;n++){let a=r[n],u=a.indexOf("=");if(u<0)continue;let p=a.substr(0,u).trim(),c=a.substr(++u,a.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),o[p]==null&&(o[p]=v(c,s))}return o}function f(e,i,o){let t=o||{},r=t.encode||k;if(typeof r!="function")throw new TypeError("option encode is invalid");if(!l.test(e))throw new TypeError("argument name is invalid");let s=r(i);if(s&&!l.test(s))throw new TypeError("argument val is invalid");let n=e+"="+s;if(t.maxAge!=null){let a=t.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");n+="; Max-Age="+Math.floor(a)}if(t.domain){if(!l.test(t.domain))throw new TypeError("option domain is invalid");n+="; Domain="+t.domain}if(t.path){if(!l.test(t.path))throw new TypeError("option path is invalid");n+="; Path="+t.path}if(t.expires){if(typeof t.expires.toUTCString!="function")throw new TypeError("option expires is invalid");n+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(n+="; HttpOnly"),t.secure&&(n+="; Secure"),t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:n+="; SameSite=Strict";break;case"lax":n+="; SameSite=Lax";break;case"strict":n+="; SameSite=Strict";break;case"none":n+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n}function v(e,i){try{return i(e)}catch{return e}}const T={path:"/",decode:e=>g(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))};function b(e,i){var s,n;const o={...T,...i},t=A(o)||{},r=d((n=t[e])!=null?n:(s=o.default)==null?void 0:s.call(o));return m(r,()=>{U(e,r.value,o)}),r}function A(e={}){return E(document.cookie,e)}function R(e,i,o={}){return i==null?f(e,i,{...o,maxAge:-1}):f(e,i,o)}function U(e,i,o={}){document.cookie=R(e,i,o)}const M=h((e,i)=>{const o=b("token"),t=y(),r=w().public.api_url;console.log("cookie",o,o.value),o.value?console.log(2):(S("/login"),console.log(1)),e.fullPath===i.fullPath&&D(o,t,r)});async function D(e,i,o){const t=await $fetch(o+"/user",{headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+e.value}});i.usersData=t}export{M as default};
