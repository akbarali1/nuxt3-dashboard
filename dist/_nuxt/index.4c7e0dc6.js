import{_ as l}from"./Loader.dd3f4897.js";import{a as u,b as h,e as r,f as s,t as m,w as c,v as p,c as g,o as n,p as f,h as v}from"./entry.2173ad45.js";import{u as y}from"./index.3762df93.js";import{_ as k,a as w}from"./logo-text.c5228760.js";const b={setup(){const t=y(),o=h();return{store:t,config:o}},components:{Loader:l},data(){return{loading:!1,error:"",data:{name:"",password:""}}},methods:{async submit(){this.loading=!0;const t={Accept:"application/json","Content-type":"application/json"},o=await $fetch(`${this.config.public.api_url}/login`,{method:"POST",body:{email:this.data.name,password:this.data.password},headers:t});this.loading=!1,o.success?(this.error="",this.getUsersData(o.token),this.pushTo\u0421ookie(o),this.$router.push("/")):this.error=`${o.error}!`},async getUsersData(t){const o=await $fetch(`${this.config.public.api_url}/user`,{headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+t}});this.store.usersData=o},pushTo\u0421ookie(t){const o=t.token;document.cookie=`token=${o}`}}},i=t=>(f("data-v-10580b8c"),t=t(),v(),t),S={class:"login-page"},I={class:"login-page-content"},x=i(()=>s("p",{class:"login-page-title"}," COPYRIGHT\xA9 AKFA UNIVERSITY ALL RIGHTS RESERVED. ",-1)),D={key:0,class:"login"},T=i(()=>s("div",{class:"login__head"},[s("div",{class:"login__head-img"},[s("img",{src:k,alt:""}),s("img",{src:w,alt:""})])],-1)),A={style:{color:"#ffffff"}},R={class:"login__form"},B={class:"login__foot"},C=i(()=>s("a",{class:"login__foot-forgot"},"Forgot password?",-1));function E(t,o,L,U,e,d){const _=l;return n(),r("div",S,[s("div",I,[x,e.loading?(n(),g(_,{key:1})):(n(),r("div",D,[T,s("p",A,m(e.error),1),s("form",R,[c(s("input",{type:"text",placeholder:"ID","onUpdate:modelValue":o[0]||(o[0]=a=>e.data.name=a)},null,512),[[p,e.data.name]]),c(s("input",{type:"password",placeholder:"Password","onUpdate:modelValue":o[1]||(o[1]=a=>e.data.password=a)},null,512),[[p,e.data.password]])]),s("div",B,[C,s("a",{onClick:o[2]||(o[2]=a=>d.submit()),style:{cursor:"pointer"},class:"login__foot-btn"},"Submit")])]))])])}const F=u(b,[["render",E],["__scopeId","data-v-10580b8c"]]);export{F as default};
